<form id="foodForm">
  <!-- field ha inja generat mishan az js -->
</form>

<script>
  const form = document.getElementById("foodForm");

  form.innerHTML = `
    <label>Burger</label>
    <input type="text" name="Burger__1" />
    <input type="text" name="Burger__2" />
    <input type="hidden" name="Burger__price" value="250000" />
    
    <label>Sushi</label>
    <input type="text" name="Sushi__1" />
    <input type="text" name="Sushi__2" />
    <input type="hidden" name="Sushi__price" value="300000" />

    <input type="hidden" name="sessionId" value="123456" />
    <button type="submit">ثبت نهایی ✅</button>
  `;

  form.addEventListener("submit", async function (e) {
    e.preventDefault();

    const formData = new FormData(form);
    const jsonData = {};

    formData.forEach((value, key) => {
      jsonData[key] = value;
    });

    const response = await fetch("https://matin111.app.n8n.cloud/webhook/submit-form", {
      method: "POST",
      headers: {
        "Content-Type": "application/json"
      },
      body: JSON.stringify(jsonData)
    });

    const result = await response.json();
    console.log("Response:", result);
  });
</script>
